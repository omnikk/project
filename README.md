# ОПИСАНИЕ ПРОГРАММЫ

**Система управления салонами красоты**

Версия 1.0

Студент: Выборнов Олег Андреевич  
Группа: ЭФМО-02-25  
Дата: 29.11.2025

---

## 1. ОБЩИЕ СВЕДЕНИЯ

**Наименование:** Система управления салонами красоты

**Программное обеспечение:**
- Backend: Python 3.10+, FastAPI, SQLAlchemy, Uvicorn
- Frontend: Node.js 16+, React 18, Vite, React Router
- База данных: SQLite 3

---

## 2. ФУНКЦИОНАЛЬНОЕ НАЗНАЧЕНИЕ

Программа предназначена для автоматизации процессов управления сетью салонов красоты и решает следующие задачи:

- Управление записями клиентов к мастерам с выбором услуг, даты и времени
- Учет финансовых показателей салонов (выручка, средний чек, отмены)
- Аналитика по салонам, мастерам и услугам с фильтрацией по периодам
- Расчет заработной платы мастеров на основе почасовых ставок
- Экспорт отчетности в формат CSV
- Управление профилями пользователей с разделением прав доступа

**Функциональные ограничения:** Система рассчитана на работу с сетью до 50 салонов, 500 мастеров и 10000 клиентов. Максимальная глубина хранения истории записей - 2 года.

---

## 3. ОПИСАНИЕ ЛОГИЧЕСКОЙ СТРУКТУРЫ

**Архитектура:** Клиент-серверная архитектура с разделением на frontend и backend части.

### Backend (API-сервер):
- `models.py` - модели данных (User, Salon, Master, Client, Appointment)
- `schemas.py` - схемы валидации данных (Pydantic)
- `main.py` - маршруты REST API и обработчики запросов
- `analytics.py` - endpoints аналитики и экспорта данных
- `database.py` - подключение к БД и создание сессий

### Frontend (веб-приложение):
- `components/` - переиспользуемые React-компоненты (Header, Footer, BookingForm, SalonCard)
- `pages/` - страницы приложения (Home, SalonPage, MasterPage, Profile, AdminDashboard)
- `main.jsx` - точка входа, маршрутизация (React Router)

**Метод работы:** RESTful API с обменом данными в формате JSON. Frontend делает HTTP-запросы к Backend через fetch API. Аутентификация через localStorage. Данные хранятся в реляционной БД SQLite с использованием ORM SQLAlchemy.

### Связи между модулями:
- User (1) → (N) Client - один пользователь может быть клиентом в разных салонах
- Salon (1) → (N) Master - в салоне работают несколько мастеров
- Master (1) → (N) Appointment - у мастера множество записей
- Client (1) → (N) Appointment - клиент может иметь много записей

---

## 4. ИСПОЛЬЗУЕМЫЕ ТЕХНИЧЕСКИЕ СРЕДСТВА

### Минимальные требования к серверу:
- Процессор: 2 ядра, 2.0 ГГц
- Оперативная память: 2 ГБ
- Дисковое пространство: 500 МБ
- ОС: Windows 10/11, Linux (Ubuntu 20.04+), macOS 11+

### Требования к клиентской части:
- Веб-браузер: Chrome 90+, Firefox 88+, Safari 14+, Edge 90+
- Разрешение экрана: минимум 1280x720
- Интернет-соединение: стабильное подключение со скоростью от 1 Мбит/с

---

## 5. ВЫЗОВ И ЗАГРУЗКА

### Запуск Backend:
1. Установить зависимости: `pip install fastapi uvicorn sqlalchemy`
2. Инициализировать БД: `python seed_data.py`
3. Запустить сервер: `uvicorn main:app --reload --port 8080`

### Запуск Frontend:
1. Установить зависимости: `npm install`
2. Запустить dev-сервер: `npm run dev`

**Точки входа:** Главная страница (/) - список салонов, Страница салона (/salon/:id), Профиль пользователя (/profile), Панель администратора (/admin)

---

## 6. ВХОДНЫЕ ДАННЫЕ

### Основные типы входных данных:

**1. Регистрация/Аутентификация пользователя:**

Формат JSON:
```json
{
  "email": "string",
  "password": "string",
  "name": "string"
}
```

**2. Создание записи к мастеру:**

Формат JSON:
```json
{
  "master_id": int,
  "client_id": int,
  "start_time": "ISO-datetime",
  "end_time": "ISO-datetime",
  "service": "string",
  "price": float,
  "status": "confirmed"
}
```

**Валидация:** Все входные данные проходят валидацию через Pydantic схемы. Обязательные поля: email (формат email), password (мин. 6 символов), даты (ISO формат), цены (положительные числа).

---

## 7. ВЫХОДНЫЕ ДАННЫЕ

### Основные типы выходных данных:

**1. Список салонов/мастеров:**

Формат JSON (массив):
```json
[
  {
    "id": int,
    "name": "string",
    "photo_url": "string"
  }
]
```

**2. Финансовая аналитика:**

Формат JSON:
```json
{
  "total_revenue": float,
  "total_appointments": int,
  "average_check": float,
  "cancelled_count": int
}
```

**3. Экспорт в CSV:**

Content-Type: `text/csv; charset=utf-8`

Формат: заголовки через запятую, данные построчно

Пример: `"Салон,Выручка,Количество\nСалон 1,150000,45"`

**4. Свободные слоты для записи:**

Формат JSON (массив):
```json
[
  {
    "time": "HH:00",
    "hour": int,
    "available": boolean
  }
]
```

### Тестовые данные:

Система содержит 4 салона, 8 мастеров, 12 клиентов и около 300 тестовых записей за период 60 дней. Услуги включают стрижки, окрашивание, маникюр, педикюр и др. с ценами от 1200₽ до 6000₽. Ставки мастеров варьируются от 280₽ до 400₽ в час.
